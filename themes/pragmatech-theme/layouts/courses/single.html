{{ define "main" }}
<article class="bg-slate-900">
    <div class="max-w-5xl mx-auto px-4 py-8">
        <div class="mb-8">
            <a href="/courses/" class="text-brand-400 hover:text-brand-300 flex items-center">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Courses
            </a>
        </div>

        <header class="mb-16">
            {{ if .Params.image }}
            <div class="mb-8">
                <img src="{{ .Params.image }}" alt="{{ .Title }}" class="w-full h-64 md:h-80 object-cover rounded-xl">
            </div>
            {{ end }}

            <h1 class="text-4xl font-bold mb-4 text-white">{{ .Title }}</h1>
            <p class="text-xl text-slate-400 mb-6">{{ .Params.summary }}</p>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 bg-slate-800 rounded-lg p-6 border border-slate-700">
                <div>
                    <div class="flex items-center mb-2">
                        <i class="fas fa-clock text-brand-400 mr-3 text-xl"></i>
                        <div>
                            <div class="font-semibold text-white">Duration</div>
                            <div class="text-slate-300">{{ .Params.duration }}</div>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="flex items-center mb-2">
                        <i class="fas fa-signal text-brand-400 mr-3 text-xl"></i>
                        <div>
                            <div class="font-semibold text-white">Level</div>
                            <div class="text-slate-300">{{ .Params.level }}</div>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="flex items-center mb-2">
                        <i class="fas fa-book text-brand-400 mr-3 text-xl"></i>
                        <div>
                            <div class="font-semibold text-white">Modules</div>
                            <div class="text-slate-300">{{ .Params.modules }}</div>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="flex items-center mb-2">
                        <i class="fas fa-sync-alt text-brand-400 mr-3 text-xl"></i>
                        <div>
                            <div class="font-semibold text-white">Last Updated</div>
                            <div class="text-slate-300">{{ .Params.last_updated }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Details Section -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-16">
            <div class="md:col-span-2">
                <div class="prose prose-invert prose-lg max-w-none page-content text-slate-300">
                    {{ .Content }}
                </div>

                <!-- Course Curriculum -->
                {{ if .Params.curriculum }}
                <div class="mt-12">
                    <h2 class="text-2xl font-bold mb-6 text-white">Course Curriculum</h2>
                    <div class="space-y-4">
                        {{ range .Params.curriculum }}
                        <div class="border border-slate-700 rounded-lg overflow-hidden">
                            <div class="bg-slate-800 px-4 py-3 font-medium flex justify-between items-center">
                                <h3 class="text-white">{{ .module }}</h3>
                                {{ if .duration }}
                                <span class="text-sm text-slate-400">{{ .duration }}</span>
                                {{ end }}
                            </div>
                            {{ if .lessons }}
                            <ul class="divide-y divide-slate-700">
                                {{ range .lessons }}
                                <li class="px-4 py-3 flex justify-between items-center bg-slate-900">
                                    <div class="flex items-center">
                                        {{ if .preview }}
                                        <i class="fas fa-play-circle text-green-500 mr-2"></i>
                                        {{ else }}
                                        <i class="fas fa-lock text-slate-500 mr-2"></i>
                                        {{ end }}
                                        <span class="text-slate-300">{{ .title }}</span>
                                    </div>
                                    <div class="text-sm text-slate-500">{{ .duration }}</div>
                                </li>
                                {{ end }}
                            </ul>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </div>
                {{ end }}

                <!-- Prerequisites -->
                {{ if .Params.prerequisites }}
                <div class="mt-12">
                    <h2 class="text-2xl font-bold mb-6 text-white">Prerequisites</h2>
                    <ul class="space-y-4">
                        {{ range .Params.prerequisites }}
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-brand-400 mr-3 mt-1"></i>
                            <span class="text-slate-300">{{ . }}</span>
                        </li>
                        {{ end }}
                    </ul>
                </div>
                {{ end }}

                <!-- PDF Viewer for Testing Spring Boot Applications Masterclass -->
                {{ if eq .Title "Testing Spring Boot Applications Masterclass" }}
                <div class="mt-12">
                    <h2 class="text-2xl font-bold mb-6 text-white">Course Overview PDF</h2>
                    <div class="mb-4">
                        <a href="/documents/PragmaTech-Automated-Spring-Boot-Testing-Online-Course.pdf" download class="inline-flex items-center bg-brand-600 text-white hover:bg-brand-500 font-medium py-2 px-4 rounded-lg transition-colors">
                            <i class="fas fa-download mr-2"></i>
                            Download Course PDF
                        </a>
                    </div>
                    <div class="border border-slate-700 rounded-xl overflow-hidden shadow-sm">
                        <div class="pdf-container" style="position: relative; padding-bottom: 125%; height: 0;">
                            <iframe src="/documents/PragmaTech-Automated-Spring-Boot-Testing-Online-Course.pdf#toolbar=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" frameborder="0"></iframe>
                        </div>
                    </div>
                </div>
                {{ end }}
            </div>

            <div>
                <div class="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden sticky top-24">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-4 text-white">Enroll in This Course</h3>
                        {{ if .Params.price }}
                        <div class="text-3xl font-bold text-brand-400 mb-4">{{ .Params.price }}</div>
                        {{ end }}
                    </div>

                    <a href="{{ .Params.course_url | default "#" }}" class="block group hover:bg-slate-700/50 transition-colors">
                        <div class="mx-6 mb-6">
                            <div class="w-full bg-brand-600 group-hover:bg-brand-500 text-white font-bold py-3 px-6 rounded-lg transition-colors text-center">
                                Start Learning Now
                            </div>

                            <div class="text-sm text-slate-400 mt-4">
                                {{ .Params.enrollment_note | default "Lifetime access. Start immediately after purchase." }}
                            </div>
                        </div>

                        <div class="px-6">
                            <h4 class="font-bold mb-2 text-white">What You'll Get:</h4>
                            <ul class="space-y-3 mb-6">
                                {{ range .Params.features }}
                                <li class="flex items-start">
                                    <i class="fas fa-check text-brand-400 mr-3 mt-1"></i>
                                    <span class="text-slate-300">{{ . }}</span>
                                </li>
                                {{ end }}
                            </ul>
                        </div>
                    </a>

                    <div class="border-t border-slate-700 p-6">
                        <div class="font-bold mb-2 text-white">Not sure if this is for you?</div>
                        <a href="/contact" class="text-brand-400 hover:text-brand-300">Contact us with questions</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Testimonials if available -->
        {{ if .Params.testimonials }}
        <div class="mb-16">
            <h2 class="text-2xl font-bold mb-6 text-white">What Students Say</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {{ range .Params.testimonials }}
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <blockquote class="text-slate-300 mb-4">
                        "{{ .quote }}"
                    </blockquote>
                    <div class="font-medium text-white">{{ .name }}</div>
                    <div class="text-slate-500 text-sm">{{ .role }}, {{ .company }}</div>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}

        <!-- Instructor Section -->
        {{ if .Params.instructor }}
        <div class="mb-16">
            <h2 class="text-2xl font-bold mb-6 text-white">Your Instructor</h2>
            <div class="flex flex-col md:flex-row gap-6 p-6 bg-slate-800 rounded-xl border border-slate-700">
                {{ if .Params.instructor.image }}
                <img src="{{ .Params.instructor.image }}" alt="{{ .Params.instructor.name }}" class="w-32 h-32 object-cover rounded-full">
                {{ end }}
                <div>
                    <h3 class="text-xl font-bold mb-2 text-white">{{ .Params.instructor.name }}</h3>
                    <div class="text-brand-400 font-medium mb-4">{{ .Params.instructor.role }}</div>
                    <p class="text-slate-300">{{ .Params.instructor.bio }}</p>
                </div>
            </div>
        </div>
        {{ end }}

        <!-- FAQ Section -->
        {{ if .Params.faqs }}
        <div class="mb-16">
            <h2 class="text-2xl font-bold mb-6 text-white">Frequently Asked Questions</h2>
            <div class="space-y-4">
                {{ range .Params.faqs }}
                <div class="bg-slate-800 rounded-lg p-6 border border-slate-700">
                    <h3 class="text-xl font-bold mb-2 text-white">{{ .question }}</h3>
                    <div class="text-slate-300">{{ .answer }}</div>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}

        <!-- Related Courses -->
        {{ $currentCourse := . }}
        {{ $relatedCourses := where (where .Site.RegularPages "Section" "courses") "Permalink" "ne" .Permalink | first 3 }}
        {{ if $relatedCourses }}
        <div class="mt-16 pt-8 border-t border-slate-700">
            <h2 class="text-2xl font-bold mb-6 text-white">Other Courses You Might Like</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {{ range $relatedCourses }}
                <div class="bg-slate-800 rounded-lg border border-slate-700 overflow-hidden group hover:border-brand-500/50 transition-colors">
                    <a href="{{ .Permalink }}" class="block">
                        {{ if .Params.image }}
                        <img src="{{ .Params.image }}" alt="{{ .Title }}" class="w-full h-40 object-cover group-hover:opacity-90 transition-opacity">
                        {{ end }}
                        <div class="p-4">
                            <h3 class="font-bold mb-2 text-white group-hover:text-brand-400 transition-colors">{{ .Title }}</h3>
                            <div class="text-sm text-slate-400 mb-2">{{ .Params.level }} Â· {{ .Params.duration }}</div>
                            <span class="text-brand-400 text-sm inline-flex items-center">
                                View details
                                <i class="fas fa-arrow-right ml-1 text-xs group-hover:translate-x-0.5 transition-transform"></i>
                            </span>
                        </div>
                    </a>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
</article>
{{ end }}
