<svg width="600" height="400" viewBox="0 0 600 400" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="pipelineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
    </linearGradient>

    <style>
      @keyframes flowRight {
        0% { transform: translateX(-100%); opacity: 0; }
        20% { opacity: 1; }
        80% { opacity: 1; }
        100% { transform: translateX(600px); opacity: 0; }
      }

      @keyframes pulse {
        0%, 100% { r: 8; opacity: 0.8; }
        50% { r: 12; opacity: 1; }
      }

      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }

      .flow-item {
        animation: flowRight 4s ease-in-out infinite;
      }

      .flow-item-1 { animation-delay: 0s; }
      .flow-item-2 { animation-delay: 0.8s; }
      .flow-item-3 { animation-delay: 1.6s; }
      .flow-item-4 { animation-delay: 2.4s; }
      .flow-item-5 { animation-delay: 3.2s; }

      .pulse-node {
        animation: pulse 2s ease-in-out infinite;
      }

      .gear {
        animation: spin 8s linear infinite;
      }
    </style>
  </defs>

  <!-- Title -->
  <text x="300" y="40" font-family="Inter, sans-serif" font-size="20" font-weight="700" fill="#0f172a" text-anchor="middle">
    CI/CD Pipeline: Before vs After
  </text>

  <!-- BEFORE Pipeline (Top) -->
  <g transform="translate(0, 80)">
    <!-- Background -->
    <rect width="600" height="100" rx="12" fill="#fef2f2" stroke="#fca5a5" stroke-width="2"/>

    <!-- Label -->
    <text x="20" y="25" font-family="Inter, sans-serif" font-size="12" font-weight="700" fill="#991b1b" letter-spacing="0.1em">
      BEFORE: 30+ MINUTES
    </text>

    <!-- Pipeline stages (slow/clogged) -->
    <g transform="translate(50, 40)">
      <!-- Stage 1: Code -->
      <rect width="80" height="50" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
      <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#7f1d1d" text-anchor="middle">Code</text>
      <circle cx="75" cy="45" r="4" fill="#dc2626" class="pulse-node"/>

      <!-- Bottleneck indicator -->
      <g transform="translate(85, 20)">
        <path d="M 0 0 L 10 5 L 0 10 Z" fill="#dc2626" opacity="0.6"/>
        <text x="15" y="8" font-family="Inter, sans-serif" font-size="9" fill="#dc2626" font-weight="600">Slow</text>
      </g>

      <!-- Stage 2: Test -->
      <g transform="translate(130, 0)">
        <rect width="80" height="50" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
        <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#7f1d1d" text-anchor="middle">Test</text>
        <circle cx="75" cy="45" r="4" fill="#dc2626" class="pulse-node"/>
      </g>

      <!-- Bottleneck indicator -->
      <g transform="translate(215, 20)">
        <path d="M 0 0 L 10 5 L 0 10 Z" fill="#dc2626" opacity="0.6"/>
        <text x="15" y="8" font-family="Inter, sans-serif" font-size="9" fill="#dc2626" font-weight="600">Slow</text>
      </g>

      <!-- Stage 3: Build -->
      <g transform="translate(260, 0)">
        <rect width="80" height="50" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
        <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#7f1d1d" text-anchor="middle">Build</text>
        <circle cx="75" cy="45" r="4" fill="#dc2626" class="pulse-node"/>
      </g>

      <!-- Bottleneck indicator -->
      <g transform="translate(345, 20)">
        <path d="M 0 0 L 10 5 L 0 10 Z" fill="#dc2626" opacity="0.6"/>
        <text x="15" y="8" font-family="Inter, sans-serif" font-size="9" fill="#dc2626" font-weight="600">Slow</text>
      </g>

      <!-- Stage 4: Deploy -->
      <g transform="translate(390, 0)">
        <rect width="80" height="50" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
        <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#7f1d1d" text-anchor="middle">Deploy</text>
        <circle cx="75" cy="45" r="4" fill="#dc2626" class="pulse-node"/>
      </g>
    </g>
  </g>

  <!-- Transformation Arrow -->
  <g transform="translate(280, 210)">
    <line x1="0" y1="0" x2="0" y2="30" stroke="#10b981" stroke-width="4" stroke-linecap="round"/>
    <polygon points="0,30 -6,22 6,22" fill="#10b981"/>
    <text x="20" y="18" font-family="Inter, sans-serif" font-size="13" font-weight="700" fill="#10b981">OPTIMIZED</text>
  </g>

  <!-- AFTER Pipeline (Bottom) -->
  <g transform="translate(0, 250)">
    <!-- Background -->
    <rect width="600" height="100" rx="12" fill="#f0fdf4" stroke="#86efac" stroke-width="2"/>

    <!-- Label -->
    <text x="20" y="25" font-family="Inter, sans-serif" font-size="12" font-weight="700" fill="#166534" letter-spacing="0.1em">
      AFTER: 3-5 MINUTES
    </text>

    <!-- Pipeline stages (fast/smooth) -->
    <g transform="translate(50, 40)">
      <!-- Stage 1: Code -->
      <rect width="80" height="50" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
      <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#065f46" text-anchor="middle">Code</text>
      <circle cx="75" cy="45" r="4" fill="#10b981" class="pulse-node"/>

      <!-- Fast indicator -->
      <g transform="translate(85, 20)">
        <path d="M 0 0 L 10 5 L 0 10 Z" fill="#10b981"/>
      </g>

      <!-- Stage 2: Test -->
      <g transform="translate(110, 0)">
        <rect width="80" height="50" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
        <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#065f46" text-anchor="middle">Test</text>
        <circle cx="75" cy="45" r="4" fill="#10b981" class="pulse-node"/>
      </g>

      <!-- Fast indicator -->
      <g transform="translate(195, 20)">
        <path d="M 0 0 L 10 5 L 0 10 Z" fill="#10b981"/>
      </g>

      <!-- Stage 3: Build -->
      <g transform="translate(220, 0)">
        <rect width="80" height="50" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
        <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#065f46" text-anchor="middle">Build</text>
        <circle cx="75" cy="45" r="4" fill="#10b981" class="pulse-node"/>
      </g>

      <!-- Fast indicator -->
      <g transform="translate(305, 20)">
        <path d="M 0 0 L 10 5 L 0 10 Z" fill="#10b981"/>
      </g>

      <!-- Stage 4: Deploy -->
      <g transform="translate(330, 0)">
        <rect width="80" height="50" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
        <text x="40" y="30" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#065f46" text-anchor="middle">Deploy</text>
        <circle cx="75" cy="45" r="4" fill="#10b981" class="pulse-node"/>
      </g>

      <!-- Flowing data particles -->
      <circle class="flow-item flow-item-1" cy="25" r="6" fill="#10b981" opacity="0"/>
      <circle class="flow-item flow-item-2" cy="25" r="6" fill="#10b981" opacity="0"/>
      <circle class="flow-item flow-item-3" cy="25" r="6" fill="#059669" opacity="0"/>
      <circle class="flow-item flow-item-4" cy="25" r="6" fill="#059669" opacity="0"/>
      <circle class="flow-item flow-item-5" cy="25" r="6" fill="#047857" opacity="0"/>
    </g>
  </g>

  <!-- Metrics -->
  <g transform="translate(480, 160)">
    <rect width="100" height="50" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
    <text x="50" y="22" font-family="Inter, sans-serif" font-size="20" font-weight="700" fill="#92400e" text-anchor="middle">6x</text>
    <text x="50" y="38" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#78350f" text-anchor="middle">Faster</text>
  </g>
</svg>
